# Claude Code並列開発ガイド

## 目次
1. [はじめに](#はじめに)
2. [事前準備](#事前準備)
3. [基本的な使い方](#基本的な使い方)
4. [並列開発の実践](#並列開発の実践)
5. [tmuxの基本操作](#tmuxの基本操作)
6. [効率的な並列開発のコツ](#効率的な並列開発のコツ)
7. [トラブルシューティング](#トラブルシューティング)

## はじめに

このガイドでは、tmuxとClaude Codeを使って複数のタスクを並列で開発する方法を説明します。

### なぜ並列開発が必要か？

- **効率向上**: 複数のタスクを同時に進められる
- **待ち時間の削減**: 一つのタスクの処理中に別のタスクを進められる
- **コンテキストスイッチの削減**: 関連タスクを同時に確認できる

## 事前準備

### 1. tmuxのインストール確認

まず、tmuxがインストールされているか確認します：

```bash
tmux -V
```

インストールされていない場合：

**macOSの場合:**
```bash
brew install tmux
```

**Ubuntuの場合:**
```bash
sudo apt-get update
sudo apt-get install tmux
```

### 2. Claude Codeのインストール確認

```bash
claude --version
```

### 3. 設定ファイルの配置

プロジェクトディレクトリに移動：
```bash
cd /Users/kamizononaoya/Documents/Dev/Growth_marketing_plan
```

設定が正しく配置されているか確認：
```bash
ls -la .tmux.conf claude-parallel.sh
```

## 基本的な使い方

### Step 1: tmuxセッションの起動

```bash
./claude-parallel.sh
```

初回起動時の画面：
- 5つのウィンドウが作成されます
- 各ウィンドウでClaude Codeが自動起動します

### Step 2: ウィンドウの切り替え

**基本的なキー操作：**
- `Ctrl-a` を押してから `1` → ウィンドウ1へ移動
- `Ctrl-a` を押してから `2` → ウィンドウ2へ移動
- `Ctrl-a` を押してから `5` → 4分割画面へ移動

### Step 3: 初心者向けの練習

1. **ウィンドウ1で簡単なタスクを実行：**
   ```
   Ctrl-a → 1
   ```
   Claude Codeで入力：
   ```
   現在のディレクトリのファイル一覧を表示して
   ```

2. **ウィンドウ2に切り替えて別のタスク：**
   ```
   Ctrl-a → 2
   ```
   Claude Codeで入力：
   ```
   package.jsonの内容を確認して
   ```

## 並列開発の実践

### 実践例1: フロントエンドとバックエンドの同時開発

**ウィンドウ1: フロントエンド開発**
```
Ctrl-a → 1
```
Claude Codeで：
```
Reactコンポーネントの新規作成を手伝って。
ユーザープロフィール表示コンポーネントを作成したい。
```

**ウィンドウ2: バックエンド開発**
```
Ctrl-a → 2
```
Claude Codeで：
```
ユーザープロフィール取得用のAPIエンドポイントを作成して。
GET /api/users/:id で実装したい。
```

### 実践例2: バグ修正と機能追加の並列作業

**ウィンドウ1: バグ調査**
```
Ctrl-a → 1
```
```
ログインフォームでエラーが発生している。
src/components/LoginForm.jsxを調査して原因を特定して。
```

**ウィンドウ2: 新機能の実装**
```
Ctrl-a → 2
```
```
ダッシュボードに新しいグラフコンポーネントを追加したい。
Chart.jsを使って売上推移グラフを実装して。
```

### 実践例3: 4分割画面での同時監視

```
Ctrl-a → 5
```

4分割画面では以下のような使い方ができます：

- **左上ペイン**: メインの開発タスク
- **右上ペイン**: テストの実行と監視
- **左下ペイン**: ログの確認
- **右下ペイン**: ドキュメントの参照や更新

各ペイン間の移動：
- `Ctrl-a` → `h` : 左のペインへ
- `Ctrl-a` → `l` : 右のペインへ
- `Ctrl-a` → `j` : 下のペインへ
- `Ctrl-a` → `k` : 上のペインへ

## tmuxの基本操作

### 必須コマンド一覧

| 操作 | キーバインド | 説明 |
|------|------------|------|
| プレフィックスキー | `Ctrl-a` | すべてのtmuxコマンドの前に必要 |
| ウィンドウ切替 | `Ctrl-a` → `数字` | 指定番号のウィンドウへ移動 |
| ペイン間移動 | `Ctrl-a` → `h/j/k/l` | vim風の移動 |
| ペイン分割（縦） | `Ctrl-a` → `|` | 現在のペインを縦に分割 |
| ペイン分割（横） | `Ctrl-a` → `-` | 現在のペインを横に分割 |
| ペインを閉じる | `Ctrl-d` または `exit` | 現在のペインを閉じる |
| セッションから離脱 | `Ctrl-a` → `d` | tmuxを終了せずに離脱 |

### セッションの再接続

tmuxから離脱した後、再接続する方法：

```bash
tmux attach-session -t claude-parallel
```

または短縮形：
```bash
tmux a -t claude-parallel
```

## 効率的な並列開発のコツ

### 1. タスクの分類と配置

**推奨される配置パターン：**

- **ウィンドウ1**: メインの開発タスク
- **ウィンドウ2**: 関連する別モジュールの開発
- **ウィンドウ3**: テストやデバッグ
- **ウィンドウ4**: ドキュメント作成や調査
- **ウィンドウ5**: 全体監視用の4分割画面

### 2. コンテキストの維持

各ウィンドウで作業を開始する際：

```
# 良い例：最初にコンテキストを設定
このウィンドウではユーザー認証機能の実装を行います。
src/auth/ディレクトリ内のファイルを中心に作業してください。
```

### 3. 進捗の同期

複数のClaude Codeインスタンス間で進捗を共有：

```
# ウィンドウ1での作業完了後
UserProfile.jsxコンポーネントを作成しました。
propsとして{ userId, showEmail }を受け取ります。
```

```
# ウィンドウ2で参照
UserProfile.jsxが{ userId, showEmail }を受け取ることを前提に
APIエンドポイントを実装してください。
```

### 4. ファイルの競合を避ける

- 同じファイルを複数のウィンドウで同時編集しない
- 編集前に必ず最新の状態を確認
- gitを活用してブランチを分ける

## トラブルシューティング

### Q1: tmuxセッションが既に存在するエラー

```bash
# 既存のセッションを確認
tmux ls

# 既存のセッションを削除
tmux kill-session -t claude-parallel

# 再度起動
./claude-parallel.sh
```

### Q2: Claude Codeが起動しない

1. Claude Codeのパスを確認：
   ```bash
   which claude
   ```

2. 手動で起動：
   ```bash
   claude --dangerously-skip-permissions
   ```

### Q3: キーバインドが効かない

1. tmux設定を再読み込み：
   ```
   Ctrl-a → :
   source-file ~/.tmux.conf
   ```

### Q4: ペインのサイズを調整したい

- `Ctrl-a` → `H` : 左に拡大
- `Ctrl-a` → `L` : 右に拡大
- `Ctrl-a` → `J` : 下に拡大
- `Ctrl-a` → `K` : 上に拡大

### Q5: 誤ってウィンドウを閉じてしまった

新しいウィンドウを作成：
```
Ctrl-a → c
```

その後、手動でClaude Codeを起動：
```bash
claude --dangerously-skip-permissions
```

## 高度な使い方

### カスタムレイアウトの作成

特定のプロジェクト用にカスタマイズしたい場合：

```bash
# 新しいスクリプトを作成
cp claude-parallel.sh my-project-parallel.sh

# 編集してカスタマイズ
vim my-project-parallel.sh
```

### セッションの保存と復元

作業状態を保存したい場合は、tmux-resurrectプラグインの導入を検討してください。

## まとめ

並列開発を効率的に行うためのポイント：

1. **小さく始める**: まず2つのウィンドウから始めて慣れる
2. **役割を明確に**: 各ウィンドウの役割を決めておく
3. **定期的に同期**: 進捗を他のウィンドウにも伝える
4. **ショートカットを覚える**: 基本的なキー操作を体で覚える

Happy Parallel Coding! 🚀